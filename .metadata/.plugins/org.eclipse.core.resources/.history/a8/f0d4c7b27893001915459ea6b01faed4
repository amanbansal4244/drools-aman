package com.fil.contribution.main;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;

import com.fil.contribution.exception.NotSupportedFileFormatException;
import com.fil.contribution.model.FileValidationModel;
import com.fil.contribution.validation.FileValidation;

/**
 * This is an entry point to run contribution process.
 *
 * @author aman bansal
 * @version 1.0
 **/
public class Main {

	/**
	 * This API helps to read input file and process further.
	 * 
	 * @param File
	 *            file
	 * @throws NotSupportedFileFormatException
	 *             , FileNotFoundException
	 */
	private void validationAfterOpeningFile(File file) throws NotSupportedFileFormatException, IOException, Exception {
		FileValidationModel fileValidationModel = null;

		try {
			fileValidationModel = FileValidation.validateAfterOpeningFile(file);
			if (fileValidationModel != null) {
				if (fileValidationModel.isFileContainSpecialChar()) {
					System.out.println("File can not be processed as it has special character.");
				} else if (fileValidationModel.isFileBlank()) {
					System.out.println("File can not be processed as it is blank.");
				}
			} else {
				throw new NullPointerException();
			}
		} catch (IOException ioe) {
			throw ioe;
		}
		catch (Exception e) {
			throw e;
		}
	}

	/**
	 * Main method to execute program.
	 * 
	 * @param args
	 * @throws NotSupportedFileFormatException
	 * @throws FileNotFoundException
	 */
	public static void main(String[] args) {
		String fileName = "largerecord_specialchar.csv";
		// String fileName = "blankfile.csv";
		// String fileName = "SpecialChar_onerecord.csv";
		File file = new File(new File("").getAbsolutePath(), "src/main/resources/" + fileName);
			try {
				new Main().validationAfterOpeningFile(file);
			} catch (NotSupportedFileFormatException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} catch (Exception e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}

	}
}
